
<!doctype html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>YSQ百货 - 登录</title>

<link rel="shortcut icon" href="favicon.ico" />
<link rel="stylesheet" type="text/css" href="__index__/css/base.css" />
<link rel="stylesheet" type="text/css" href="__index__/css/style.css" />
<link rel="stylesheet" type="text/css" href="__index__/css/iconfont.css" />
<link rel="stylesheet" type="text/css" href="__index__/css/purebox.css" />
<link rel="stylesheet" type="text/css"
	href="__index__/css/quickLinks.css" />

<!-- 滑块验证 -->
<link href="__SliderCaptcha__/lib/font-awesome/css/font-awesome.min.css" rel="stylesheet" />
<link href="__SliderCaptcha__/disk/slidercaptcha.css" rel="stylesheet" />
<link href="__root__/css/SliderCaptcha.css" rel="stylesheet" />

<script type="text/javascript" src="__index__/js/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="__index__/js/jquery.json.js"></script>
<script type="text/javascript" src="__index__/js/transport_jquery.js"></script>
<script type="text/javascript">
	//加载效果
	var load_cart_info = '<img src="__index__/img/loadGoods.gif" class="load" />';
	var load_icon = '<img src="__index__/img/load.gif" width="200" height="200" />';
</script>
<script type="text/javascript">
	/*登录、注册、找回密码js语言包*/
	var default_username = "<i class='iconfont icon-info-sign'></i>支持中文、字母、数字、”-”的组合，3-20个字符";
	var username_empty = "<i class='iconfont icon-minus-sign'></i>请输入用户名";
	var username_shorter = "<i class='iconfont icon-minus-sign'></i>用户名长度不能少于 4 个字符。";
	var username_invalid = "<i class='iconfont icon-minus-sign'></i>用户名只能是由字母数字以及下划线组成。";
	var password_empty = "<i class='iconfont icon-minus-sign'></i>请输入密码";
	var password_shorter = "<i class='iconfont icon-minus-sign'></i>登录密码不能少于 6 个字符。";
	var confirm_password_invalid = "<i class='iconfont icon-minus-sign'></i>两次输入密码不一致";
	var captcha_empty = "<i class='iconfont icon-minus-sign'></i>请输入验证码";
	var email_empty = "<i class='iconfont icon-minus-sign'></i>Email不能为空";
	var email_invalid = "<i class='iconfont icon-minus-sign'></i>Email 不是合法的地址";
	var agreement = "<i class='iconfont icon-minus-sign'></i>您没有接受协议";
	var msn_invalid = "<i class='iconfont icon-minus-sign'></i>msn地址不是一个有效的邮件地址";
	var qq_invalid = "<i class='iconfont icon-minus-sign'></i>QQ号码不是一个有效的号码";
	var home_phone_invalid = "<i class='iconfont icon-minus-sign'></i>家庭电话不是一个有效号码";
	var office_phone_invalid = "<i class='iconfont icon-minus-sign'></i>办公电话不是一个有效号码";
	var mobile_phone_invalid = "<i class='iconfont icon-minus-sign'></i>手机号码不是一个有效号码";
	var no_select_question = "<i class='iconfont icon-minus-sign'></i>您没有完成密码提示问题的操作";
	var mobile_phone_username_equalTo = "<i class='iconfont icon-minus-sign'></i>用户不能和手机号码相同";
	var msg_un_blank = "<i class='iconfont icon-minus-sign'></i>用户名不能为空";
	var msg_un_length = "<i class='iconfont icon-minus-sign'></i>用户名最长不得超过15个字符，一个汉字等于2个字符";
	var msg_un_format = "<i class='iconfont icon-minus-sign'></i>用户名含有非法字符";
	var msg_un_registered = "<i class='iconfont icon-minus-sign'></i>用户名已经存在,请重新输入";
	var msg_email_blank = "<i class='iconfont icon-minus-sign'></i>邮件地址不能为空";
	var msg_email_registered = "<i class='iconfont icon-minus-sign'></i>邮箱已存在,请重新输入";
	var msg_email_format = "<i class='iconfont icon-minus-sign'></i>格式错误，请输入正确的邮箱地址";
	var msg_blank = "<i class='iconfont icon-minus-sign'></i>不能为空";
	var passwd_balnk = "<i class='iconfont icon-minus-sign'></i>密码中不能包含空格";
	var msg_phone_blank = "<i class='iconfont icon-minus-sign'></i>手机号码不能为空";
	var msg_phone_registered = "<i class='iconfont icon-minus-sign'></i>手机已存在,请重新输入";
	var msg_phone_invalid = "<i class='iconfont icon-minus-sign'></i>无效的手机号码";
	var msg_phone_not_correct = "<i class='iconfont icon-minus-sign'></i>手机号码不正确，请重新输入";
	var msg_mobile_code_blank = "<i class='iconfont icon-minus-sign'></i>手机验证码不能为空";
	var msg_mobile_code_not_correct = "<i class='iconfont icon-minus-sign'></i>手机验证码不正确";
	var msg_confirm_pwd_blank = "<i class='iconfont icon-minus-sign'></i>确认密码不能为空";
	var msg_identifying_code = "<i class='iconfont icon-minus-sign'></i>验证码不能为空";
	var msg_identifying_not_correct = "<i class='iconfont icon-minus-sign'></i>验证码不正确";
	var msg_email_code = "<i class='iconfont icon-minus-sign'></i>邮箱验证码不能为空";
	var msg_email_code_not = "<i class='iconfont icon-minus-sign'></i>邮箱验证码不正确";
	var weak = "弱";
	var In = "中";
	var strong = "强";
	var null_username = "<i class='iconfont icon-minus-sign'></i>用户名不能为空";
	var null_email = "<i class='iconfont icon-minus-sign'></i>邮箱不能为空";
	var null_captcha = "<i class='iconfont icon-minus-sign'></i>验证码不能为空";
	var null_phone = "<i class='iconfont icon-minus-sign'></i>手机不能为空";
	var select_password_question = "<i class='iconfont icon-minus-sign'></i>请选择密码提示问题";
	var null_password_question = "<i class='iconfont icon-minus-sign'></i>问题不能为空";
	var error_captcha = "<i class='iconfont icon-minus-sign'></i>验证码错误";
	var msg_can_rg = "<i class='iconfont icon-ok'></i>可以注册";
	var user_name_empty = "<i class='iconfont icon-minus-sign'></i>请输入您的用户名";
	var email_address_empty = "<i class='iconfont icon-minus-sign'></i>请输入您的电子邮件地址";
	var phone_address_empty = "<i class='iconfont icon-minus-sign'></i>请输入您的手机号";
	var phone_address_empty_11 = "<i class='iconfont icon-minus-sign'></i>请输入正确11位手机号码";
	var phone_address_empty_bzq = "<i class='iconfont icon-minus-sign'></i>您输入的手机号码不正确";
	var wenti_address_empty = "<i class='iconfont icon-minus-sign'></i>请输入您的注册问题";
	var email_address_error = "<i class='iconfont icon-minus-sign'></i>您输入的电子邮件地址格式不正确";
	var new_password_empty = "<i class='iconfont icon-minus-sign'></i>请输入您的新密码";
	var confirm_password_empty = "<i class='iconfont icon-minus-sign'></i>请输入您的确认密码";
	var both_password_error = "<i class='iconfont icon-minus-sign'></i>您两次输入的密码不一致";
</script>
</head>

<body class="bg-ligtGary">
	<div class="login">
		<div class="loginRegister-header">
			<div class="w w1200">
				<div class="logo">
					<div class="logoImg">
						<a href="https://blog.csdn.net/qq_43290318"><img
							src="__root__/logo1.png" style="height: 90%;" /></a> <a
							href="https://blog.csdn.net/qq_43290318"><img
							src="__root__/ecsc-join.gif" /></a>
					</div>
				</div>
				<div class="header-href">
					<span>还没有账号<a href="{:url('member/register')}" class="jump">免费注册</a></span>
				</div>
			</div>
		</div>
		<div class="container" >
			<div class="login-wrap">
				<div class="w w1200">
					<div class="login-form">
						<div class="coagent">
							<div class="tit">
								<h3>用第三方账号直接登录</h3>
								<span></span>
							</div>
							<div class="coagent-warp">
								<a href="#" class="qq"><b class="third-party-icon qq-icon"></b></a>
							</div>
						</div>
						<div class="login-box">
							<div class="tit">
								<h3>账号登录</h3>
								<span></span>
							</div>
							<div class="msg-wrap">
								<div class="msg-error"></div>
							</div>
							
							<div class="form">
								<form id="loginForm" name="formLogin" action="{:url('member/login')}"
									method="post">
									<div class="item">
										<div class="item-info">
											<i class="iconfont icon-name"></i> <input type="text"
												id="username" name="username" class="text" value=""
												placeholder="手机" autocomplete="off" />
										</div>
										<div class="msg"></div>
									</div>
									<div class="item">
										<div class="item-info">
											<i class="iconfont icon-password"></i><input type="password"
												id="nloginpwd" name="password" class="text" value=""
												placeholder="密码" autocomplete="off" />

										</div>
										<div class="msg"></div>
									</div>
									<div class="item">
										<div class="item-info">
											<i class="iconfont icon-password"></i><input type="text"
												name="captcha" id="captcha" class="text" value=""
												autocomplete="off" placeholder="验证码" /> <img
												style="position: absolute; top: 0px; right: 0px;"
												id="captchaImg" src="{:captcha_src()}"
												onClick="this.src='{:captcha_src()}'" />
										</div>
										<div class="msg"></div>
									</div>

									<div class="item item-button">
										<input type="hidden" name="act" value="act_login"
											autocomplete="off" /> <input type="hidden" name="back_act"
											value=".%2Findex.php" autocomplete="off" /> <input
											type="submit" id="loginSubmit"
											value="登&nbsp;&nbsp;录" class="btn sc-redBg-btn">
									</div>
									<a href="#" class="notpwd gary">忘记密码？</a>
								</form>
								<!-- 滑块验证码 start -->
								<div class="slidercaptcha card" style="top:160px;left:50%;margin-left:-157px;">
									<div class="card-header">
										<span>请完成安全验证!</span>
									</div>
									<div class="card-body">
										<div id="captcha1"></div>
									</div>
								</div>
								<!-- 滑块验证码 end -->
							</div>
						</div>
					</div>
				</div>
				<a class="login-banner" href="javascript:void(0);"
					style="background: url(__index__/img/1488936109167439630.jpg) center center no-repeat;"></a>

			</div>
		</div>
	</div>

	<div class="footer user-footer">
		<div class="dsc-copyright">
			<div class="w w1200">

				<p class="footer-ecscinfo pb10">

					<a href="index.php">首页</a> | <a href="article.php?id=2">隐私保护</a> |
					<a href="article.php?id=4">联系我们</a> | <a href="article.php?id=1">免责条款</a>

					| <a href="article.php?id=5">公司简介</a> | <a href="merchants.php"
						target="_blank">商家入驻</a> | <a href="message.php">意见反馈</a>


				</p>

				<p class="footer-otherlink">
					<a href="#" target="_blank" title="模板堂">模板堂</a> | <a href="#"
						target="_blank" title="ECJia">ECJia</a> | <a href="#"
						target="_blank" title="ECTouch">ECTouch</a> | <a href="#"
						target="_blank" title="电商学院">电商学院</a>

				</p>
				<p class="copyright_info">
					<span>Copyright © 2020 <a
						href="https://blog.csdn.net/qq_43290318">passerbyYSQ</a>. All
						Rights Reserved | <a href="http://www.beian.miit.gov.cn/">粤ICP备20036780号</a></span>
					<br> <span>Powered by <a
						href="https://blog.csdn.net/qq_43290318">passerbyYSQ</a>
						1127664027@qq.com
					</span>
				</p>
			</div>
		</div>

	</div>
	<script src="__SliderCaptcha__/lib/jquery/jquery.min.js"></script>

	<script type="text/javascript" src="__index__/js/utils.js"></script>
	<script type="text/javascript"
		src="__index__/js/jquery.SuperSlide.2.1.1.js"></script>
	<script type="text/javascript"
		src="__index__/js/perfect-scrollbar.min.js"></script>
	<script type="text/javascript"
		src="__index__/js/jquery.validation.min.js"></script>
	<script type="text/javascript" src="__index__/js/jquery.purebox.js"></script>

	<script
		src="__SliderCaptcha__/lib/twitter-bootstrap/js/bootstrap.bundle.js"></script>
	<script src="__SliderCaptcha__/disk/longbow.slidercaptcha.js"></script>

	<script type="text/javascript">
		

		$(function() {
			
			function login(form) {
				$(".slidercaptcha").css({
					display : "block"
				});
				var $captcha = $('#captcha1').sliderCaptcha(
						{
							repeatIcon : 'fa fa-redo',
							setSrc : function() {
								return 'http://imgs.sdgxgz.com/images/Pic'
										+ Math.round(Math.random() * 136) + '.jpg';
							},
							onSuccess : function() { //成功事件
								console.log('bug');
								console.log($(form));
								//$("#loginForm").submit();
								
								// 无法提交
								$(form).submit();
								//document:loginForm.submit();
							}
						});
			}
			
			$("form[name='formLogin']").validate(
					{
						// 验证通过后的回调
						submitHandler : function(form) {
							form.submit();
							//login(form);
						},
						// 修改错误信息的显示位置

						errorPlacement : function(error, element) { // 错误信息，input表单项
							var error_div = element.parents('div.item').find(
									'div.msg');
							error_div.html("").append(error);
						},

						ignore : ".ignore",
						rules : {
							username : {
								required : true,
								isMobile : true
							// 自定义的验证规则
							},
							password : {
								required : true
							},
							captcha : {
								required : true,
								remote : {
									cache : false,
									async : true,
									type : 'POST',
									url : "{:url('member/checkCaptcha')}",
									data : { // 提交给服务端的数据（键值对）
										captcha : function() {
											return $("input[name='captcha']")
													.val();
										}
									},
									// 远程地址只能输出"true"或"false"，不能有其它输出。
									dataFilter : function(data, type) {
										if (data == "false") {
											// 制造点击事件，使验证码刷新。
											$("input[name='captcha']")
													.siblings().click();
										}
										return data;
									}
								}
							}
						},
						messages : {
							username : {
								required : "手机号不能为空",
								isMobile : "手机号格式错误"
							},
							password : {
								required : "密码不能为空"
							},
							captcha : {
								required : "验证码不能为空",
								remote : "验证码错误，已刷新"
							}
						},
						onkeyup : function(element, event) {
							var name = $(element).attr("name");
							if (name == "captcha") {
								//不可去除，当是验证码输入必须失去焦点才可以验证（错误刷新验证码）
								return true;
							}
						}
					});
		});
	</script>



</body>
</html>

